#### 前提

- [Hadoop(3.2.4)单节点安装](https://ispong.isxcode.com/hadoop/hadoop/hadoop%20%E5%8D%95%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85/)
- [Hadoop开启jobhistory](https://ispong.isxcode.com/hadoop/hadoop/hadoop%20Jobhistory/)
- [Spark(3.1.1)单节点安装](https://ispong.isxcode.com/hadoop/spark/spark%20%E5%8D%95%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85/)
- [Spark开启HistoryServer](https://ispong.isxcode.com/hadoop/spark/spark%20HistoryServer/)
- [Hive(3.1.2)单节点安装](https://ispong.isxcode.com/hadoop/hive/hive%20%E5%8D%95%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85/)
- [安装maven(3.8.6)](https://ispong.isxcode.com/spring/maven/maven%20%E5%AE%89%E8%A3%85/)
- [安装git](https://ispong.isxcode.com/github/git/git%20%E5%AE%89%E8%A3%85/)

###### 下载代码

> 推荐使用gitee下载
> `git clone https://gitee.com/ispong/spark-star.git`

```bash
git clone https://github.com/ispong/spark-star.git
```

###### 编译项目

```bash
mvn clean package -DskipTests
```

###### 配置环境变量

> 打包位置 `spark-star/star-dist/target/spark-star-1.2.0-bin/spark-star-1.2.0`

```bash
sudo ln -s /home/ispong/spark-star/star-dist/target/spark-star-1.2.0-bin/spark-star-1.2.0 /opt/star
sudo vim /etc/profile
```

```bash
export STAR_HOME=/opt/star
export PATH=$PATH:$STAR_HOME/bin

# 必填环境变量
export YARN_CONF_DIR=/opt/hadoop/etc/hadoop
```

```bash
source /etc/profile
```

###### 修改配置

```bash
star config
```

```yaml
server:
  port: 30156 
  
star:
  secret: star-key
```

###### 插件启动

```bash
star start
```

```log
                            __                       __
  _________________ _______|  | __           _______/  |______ _______
 /  ___/\____ \__  \\_  __ \  |/ /  ______  /  ___/\   __\__  \\_  __ \
 \___ \ |  |_> > __ \|  | \/    <  /_____/  \___ \  |  |  / __ \|  | \/
/____  >|   __(____  /__|  |__|_ \         /____  > |__| (____  /__|
     \/ |__|       \/           \/              \/            \/


version: 1.2.0

2022-12-14 15:45:44.857  INFO 18328 --- [           main] com.isxcode.star.server.StarApplication  : Starting StarApplication v1.2.0 on isxcode with PID 18328 (/home/ispong/spark-star/star-dist/target/spark-star-1.2.0-bin/spark-star-1.2.0/lib/star-server.jar started by ispong in /home/ispong/spark-star/star-dist/target/spark-star-1.2.0-bin/spark-star-1.2.0/bin)
2022-12-14 15:45:44.860  INFO 18328 --- [           main] com.isxcode.star.server.StarApplication  : The following profiles are active: star
2022-12-14 15:45:46.560  INFO 18328 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 30156 (http)
2022-12-14 15:45:46.578  INFO 18328 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-12-14 15:45:46.579  INFO 18328 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.34]
2022-12-14 15:45:46.671  INFO 18328 --- [           main] o.a.c.c.C.[.[localhost].[/spark-star]    : Initializing Spring embedded WebApplicationContext
2022-12-14 15:45:46.672  INFO 18328 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1746 ms
2022-12-14 15:45:47.174  INFO 18328 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2022-12-14 15:45:47.467  INFO 18328 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 30156 (http) with context path '/spark-star'
2022-12-14 15:45:47.470  INFO 18328 --- [           main] com.isxcode.star.server.StarApplication  : Started StarApplication in 3.331 seconds (JVM running for 3.904)
```

###### 插件关闭

```bash
star stop
```
